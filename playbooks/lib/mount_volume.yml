- hosts: "{{ server }}"

  vars:
    device: /dev/vdb
    dir: /data

  tasks:
    - name: create filesystem
      filesystem: fstype=xfs dev="{{ device }}"
      sudo: yes
    - name: create directory
      file: path="{{ dir }}" state=directory
      sudo: yes
    - name: mount volume
      mount: state=mounted name="{{ dir }}" src="{{ device }}" fstype=xfs
      sudo: yes
    - name: set selinux context
      file: path="{{ dir }}" setype=svirt_sandbox_file_t
      sudo: yes
